@page "/"

<style>
    .my-fl {
        width: 350px;
    }

    .top-margin > div {
        margin-top: unset !important;
    }
</style>

<DxFormLayout CssClass="my-fl" CaptionPosition="CaptionPosition.Vertical">
    <DxFormLayoutGroup Caption="Contact Me By:">
        <DxFormLayoutItem>
            <DxRadioGroup Items="@ContactMethod"
                          Value="@PreferredContactMethod"
                          ValueChanged="@((string value) => RadioValueChanged(value))" />
        </DxFormLayoutItem>
        <DxFormLayoutItem CssClass="top-margin" Visible="@IsEmail">
            <DxCheckBox LabelPosition="LabelPosition.Right" @bind-Checked="IsAlternateEmail">Alternate Email</DxCheckBox>
        </DxFormLayoutItem>
    </DxFormLayoutGroup>
    <DxFormLayoutGroup Visible="@IsEmail" Caption="Contact Details:">
        <DxFormLayoutItem Caption="E-mail:" ColSpanMd="12">
            <DxTextBox />
        </DxFormLayoutItem>
        <DxFormLayoutItem Caption="Retype E-mail:" ColSpanMd="12">
            <DxTextBox />
        </DxFormLayoutItem>
        <DxFormLayoutItem Caption="Alternate E-mail:" ColSpanMd="12" Visible=@IsAlternateEmail>
            <DxTextBox />
        </DxFormLayoutItem>
        <DxFormLayoutItem Caption="Retype Alternate E-mail:" ColSpanMd="12" Visible=@IsAlternateEmail>
            <DxTextBox />
        </DxFormLayoutItem>
    </DxFormLayoutGroup>
    <DxFormLayoutGroup Visible="@IsPhone" Caption="Contact Details:">
        <DxFormLayoutItem Caption="Code:" ColSpanMd="3">
            <DxTextBox />
        </DxFormLayoutItem>
        <DxFormLayoutItem Caption="Phone:" ColSpanMd="9">
            <DxTextBox />
        </DxFormLayoutItem>
    </DxFormLayoutGroup>
    <DxFormLayoutGroup Visible="@IsPost" Caption="Contact Details:">
        <DxFormLayoutItem Caption="Address:" ColSpanMd="12">
            <DxTextBox />
        </DxFormLayoutItem>
        <DxFormLayoutItem Caption="City:" ColSpanMd="8">
            <DxTextBox />
        </DxFormLayoutItem>
        <DxFormLayoutItem Caption="Zip Code:" ColSpanMd="4">
            <DxTextBox />
        </DxFormLayoutItem>
    </DxFormLayoutGroup>
</DxFormLayout>

@code {
    bool IsEmail = true;
    bool IsPhone = false;
    bool IsPost = false;
    bool isAlternateEmail = false;
    bool IsAlternateEmail { get => isAlternateEmail; set { isAlternateEmail = value; InvokeAsync(StateHasChanged); } }

    IEnumerable<string> ContactMethod = new[] { "E-mail", "Phone", "Post" };
    string PreferredContactMethod { get; set; } = "E-mail";

    void RadioValueChanged(string newContactMethod) {
        PreferredContactMethod = newContactMethod;
        switch(PreferredContactMethod) {
            case "E-mail": IsEmail = true; IsPhone = false; IsPost = false; break;
            case "Phone": IsPhone = true; IsEmail = false; IsPost = false; break;
            case "Post": IsPost = true; IsEmail = false; IsPhone = false; break;
        }
    }
}
